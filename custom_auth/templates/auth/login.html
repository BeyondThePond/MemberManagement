{% extends "base/base.html" %}
{% load uikit_tags %}
{% load static %}
{% load render_entrypoint from webpack_loader %}


{% block title %}Membership Portal - Jacobs University Bremen Alumni {% endblock %}

{% block head %}
    {% render_entrypoint "custom_auth__login" "css" %}
{% endblock %}

{% block pagetitle %}
Login
{% endblock %}

{% block content %}
<div>
    <div {% if googlefail %} class="uk-alert uk-alert-danger" uk-alert {% endif%}>
        <div id="g_id_onload"
            data-client_id="{{ client_id }}"
            data-callback="handleGoogleLogin"
            data-ux-mode="popup"
        >
        </div>

        <div class="g_id_signin" data-type="standard" data-theme="filled_blue" data-text="signin_with" data-shape="square"></div>
        {% if googlefail %}
            The Google Account you are attempting to sign in with is not associated to any portal account. 
            Please try again. 
        {% endif %}
    </div>
    <h2>OR</h2>
    <form id="local-login" class="uk-form-horizontal" method="POST">
        {% csrf_token %}
        {{ form | as_uikit_form }}
        <input type="submit" class="uk-button uk-button-primary" value="Login" id="input_id_login">
    </form>
</div>

{% endblock %}
{% block extrascripts %}

<script>
    window.login_script_settings = {
        next: "{{ next | escapejs }}",
        token_endpoint: "{% url 'token_login' %}"
    }
</script>
{% render_entrypoint "custom_auth__login" "js" %}
{% endblock %}