{% extends "base/base.html" %}

{% load registry_display %}

{% block title %}Member{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css" type="text/css">
<style>
    .map {
        height: 400px;
        width: 100%;
    }
</style>
<script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
{% endblock %}

{% block content %}
<article class="uk-article">
    <h1 class="uk-article-title">
        Jacobs Alumni Member
    </h1>

    <p class="uk-article-lead">
        <div class="uk-grid">
            <div class="uk-width-1-2">
                <table class="uk-table uk-table-small">
                    <tbody>
                        <tr>
                            <td>First Name</td>
                            <td>{{ alumni.firstName | safe }}</td>
                        </tr>
        
                        {% if alumni.middleName is not None %}
                            <tr>
                                <td>Middle Name</td>
                                <td>{{ alumni.middleName | safe }}</td>
                            </tr>
                        {% endif %}
        
                        <tr>
                            <td>Last Name</td>
                            <td>{{ alumni.lastName|safe }}</td>
                        </tr>
        
                        {% if alumni.birthdayVisible %}
                        
                        <tr>
                            <td>Birthday</td>
                            <td>{{ alumni.birthday|date }}</td>
                        </tr>
        
                        {% endif %}
                
                        <tr>
                            <td>Category</td>
                            <td>{{ alumni |get_choice_field:"category"|safe }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="uk-width-1-2">
                <div id="map" class="map"></div>
            </div>
        </div>
    </p>

    <script type="text/javascript">

        // get the point and feature
        var point = {{ alumni_coords }};
        var proj = ol.proj.fromLonLat([point[1], point[0]]);
        var feature = new ol.Feature(
            new ol.geom.Point(proj)
        );

        // create a feature layer
        var featureLayer = new ol.layer.Vector({
            source: new ol.source.Vector({
                features: [feature]
            }),
            style: function(feature) {
                return new ol.style.Style({
                    image: new ol.style.Circle({
                        radius: 10,
                        stroke: new ol.style.Stroke({
                            color: '#fff'
                        }),
                        fill: new ol.style.Fill({
                            color: '#3399CC'
                        })
                    }),
                });
            }
        });

        // the source for all the images is OpenStreetMap
        var raster = new ol.layer.Tile({
            source: new ol.source.OSM()
        });

        // finally: create a map
        var map = new ol.Map({
            layers: [raster, featureLayer],
            target: 'map',
            view: new ol.View({
                center: proj,
                zoom: 4
            })
        });

    </script>
</article>
{% endblock %}